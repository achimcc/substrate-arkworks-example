# Benchmarks

## Table of Contents

- [Benchmark Results](#benchmark-results)
    - [sample](#sample)
    - [arithmetic](#arithmetic)
    - [serialization](#serialization)
    - [msm](#msm)
    - [squareroot](#squareroot)
    - [bitwise](#bitwise)
    - [conversions](#conversions)

## Benchmark Results

### sample

|        | `bls12_381_optimized::g1projectivebls12_381 elements`          | `bls12_381_optimized::g2projectivebls12_381 elements`           |
|:-------|:---------------------------------------------------------------|:--------------------------------------------------------------- |
|        | `302.23 us` (‚úÖ **1.00x**)                                      | `2.14 ms` (‚ùå *7.07x slower*)                                    |

### arithmetic

|                                       | `for bls12_381_optimized::froptimized::bigint`          | `for bls12_381_optimized::fqoptimized::bigint`          | `for bls12_381_optimized::g1projectivebls12_381`          | `for bls12_381_optimized::g2projectivebls12_381`          | `for bls12_381_optimized::fq2optimized`          | `for bls12_381_optimized::fq12optimized`          | `for bls12_381_optimized::fqoptimized`          | `for bls12_381_optimized::froptimized`           |
|:--------------------------------------|:--------------------------------------------------------|:--------------------------------------------------------|:----------------------------------------------------------|:----------------------------------------------------------|:-------------------------------------------------|:--------------------------------------------------|:------------------------------------------------|:------------------------------------------------ |
| **`addition`**                        | `N/A`                                                   | `N/A`                                                   | `1.24 us` (‚úÖ **1.00x**)                                   | `4.04 us` (‚ùå *3.25x slower*)                              | `23.08 ns` (üöÄ **53.80x faster**)                 | `205.30 ns` (üöÄ **6.05x faster**)                  | `12.44 ns` (üöÄ **99.84x faster**)                | `8.80 ns` (üöÄ **141.11x faster**)                 |
| **`subtraction`**                     | `N/A`                                                   | `N/A`                                                   | `1.27 us` (‚úÖ **1.00x**)                                   | `4.09 us` (‚ùå *3.22x slower*)                              | `23.13 ns` (üöÄ **54.91x faster**)                 | `183.05 ns` (üöÄ **6.94x faster**)                  | `13.26 ns` (üöÄ **95.78x faster**)                | `9.00 ns` (üöÄ **141.08x faster**)                 |
| **`mixed addition`**                  | `N/A`                                                   | `N/A`                                                   | `890.29 ns` (‚úÖ **1.00x**)                                 | `2.90 us` (‚ùå *3.26x slower*)                              | `N/A`                                            | `N/A`                                             | `N/A`                                           | `N/A`                                            |
| **`mixed subtraction`**               | `N/A`                                                   | `N/A`                                                   | `920.50 ns` (‚úÖ **1.00x**)                                 | `2.95 us` (‚ùå *3.20x slower*)                              | `N/A`                                            | `N/A`                                             | `N/A`                                           | `N/A`                                            |
| **`double`**                          | `N/A`                                                   | `N/A`                                                   | `608.61 ns` (‚úÖ **1.00x**)                                 | `1.82 us` (‚ùå *2.99x slower*)                              | `12.45 ns` (üöÄ **48.88x faster**)                 | `147.67 ns` (üöÄ **4.12x faster**)                  | `7.42 ns` (üöÄ **82.06x faster**)                 | `5.89 ns` (üöÄ **103.30x faster**)                 |
| **`scalar multiplication`**           | `N/A`                                                   | `N/A`                                                   | `419.52 us` (‚úÖ **1.00x**)                                 | `1.28 ms` (‚ùå *3.06x slower*)                              | `N/A`                                            | `N/A`                                             | `N/A`                                           | `N/A`                                            |
| **`negation`**                        | `N/A`                                                   | `N/A`                                                   | `N/A`                                                     | `N/A`                                                     | `22.13 ns` (‚ùå *3.51x slower*)                    | `117.11 ns` (‚ùå *18.59x slower*)                   | `18.38 ns` (‚ùå *2.92x slower*)                   | `6.30 ns` (‚úÖ **1.00x**)                          |
| **`multiplication`**                  | `N/A`                                                   | `N/A`                                                   | `N/A`                                                     | `N/A`                                                     | `255.44 ns` (‚ùå *5.50x slower*)                   | `6.51 us` (‚ùå *140.20x slower*)                    | `78.62 ns` (‚ùå *1.69x slower*)                   | `46.42 ns` (‚úÖ **1.00x**)                         |
| **`square`**                          | `N/A`                                                   | `N/A`                                                   | `N/A`                                                     | `N/A`                                                     | `170.52 ns` (‚ùå *4.55x slower*)                   | `4.58 us` (‚ùå *122.28x slower*)                    | `66.52 ns` (‚ùå *1.78x slower*)                   | `37.44 ns` (‚úÖ **1.00x**)                         |
| **`inverse`**                         | `N/A`                                                   | `N/A`                                                   | `N/A`                                                     | `N/A`                                                     | `15.72 us` (‚ùå *2.09x slower*)                    | `26.40 us` (‚ùå *3.50x slower*)                     | `15.38 us` (‚ùå *2.04x slower*)                   | `7.53 us` (‚úÖ **1.00x**)                          |
| **`sum of products of size 2`**       | `N/A`                                                   | `N/A`                                                   | `N/A`                                                     | `N/A`                                                     | `550.09 ns` (‚ùå *6.36x slower*)                   | `13.37 us` (‚ùå *154.55x slower*)                   | `126.65 ns` (‚ùå *1.46x slower*)                  | `86.50 ns` (‚úÖ **1.00x**)                         |
| **`naive sum of products of size 2`** | `N/A`                                                   | `N/A`                                                   | `N/A`                                                     | `N/A`                                                     | `540.31 ns` (‚ùå *6.12x slower*)                   | `13.31 us` (‚ùå *150.72x slower*)                   | `163.98 ns` (‚ùå *1.86x slower*)                  | `88.31 ns` (‚úÖ **1.00x**)                         |
| **`addition with carry`**             | `7.61 ns` (‚úÖ **1.00x**)                                 | `8.68 ns` (‚ùå *1.14x slower*)                            | `N/A`                                                     | `N/A`                                                     | `N/A`                                            | `N/A`                                             | `N/A`                                           | `N/A`                                            |
| **`subtraction with borrow`**         | `8.74 ns` (‚úÖ **1.00x**)                                 | `9.92 ns` (‚ùå *1.13x slower*)                            | `N/A`                                                     | `N/A`                                                     | `N/A`                                            | `N/A`                                             | `N/A`                                           | `N/A`                                            |
| **`multiplication by 2`**             | `4.69 ns` (‚úÖ **1.00x**)                                 | `4.88 ns` (‚úÖ **1.04x slower**)                          | `N/A`                                                     | `N/A`                                                     | `N/A`                                            | `N/A`                                             | `N/A`                                           | `N/A`                                            |
| **`division by 2`**                   | `4.54 ns` (‚úÖ **1.00x**)                                 | `4.52 ns` (‚úÖ **1.00x faster**)                          | `N/A`                                                     | `N/A`                                                     | `N/A`                                            | `N/A`                                             | `N/A`                                           | `N/A`                                            |

### serialization

|                                          | `for bls12_381_optimized::g1projectivebls12_381`          | `for bls12_381_optimized::g2projectivebls12_381`          | `for bls12_381_optimized::froptimized`          | `for bls12_381_optimized::fqoptimized`          | `for bls12_381_optimized::fq2optimized`          | `for bls12_381_optimized::fq12optimized`           |
|:-----------------------------------------|:----------------------------------------------------------|:----------------------------------------------------------|:------------------------------------------------|:------------------------------------------------|:-------------------------------------------------|:-------------------------------------------------- |
| **`serialize compressed`**               | `164.10 ns` (‚úÖ **1.00x**)                                 | `227.68 ns` (‚ùå *1.39x slower*)                            | `29.55 ns` (üöÄ **5.55x faster**)                 | `55.73 ns` (üöÄ **2.94x faster**)                 | `110.26 ns` (‚úÖ **1.49x faster**)                 | `728.00 ns` (‚ùå *4.44x slower*)                     |
| **`serialize uncompressed`**             | `216.91 ns` (‚úÖ **1.00x**)                                 | `328.43 ns` (‚ùå *1.51x slower*)                            | `29.54 ns` (üöÄ **7.34x faster**)                 | `55.76 ns` (üöÄ **3.89x faster**)                 | `110.28 ns` (üöÄ **1.97x faster**)                 | `727.92 ns` (‚ùå *3.36x slower*)                     |
| **`deserialize compressed`**             | `326.00 us` (‚úÖ **1.00x**)                                 | `560.89 us` (‚ùå *1.72x slower*)                            | `57.20 ns` (üöÄ **5698.80x faster**)              | `100.90 ns` (üöÄ **3230.88x faster**)             | `217.01 ns` (üöÄ **1502.23x faster**)              | `1.34 us` (üöÄ **242.93x faster**)                   |
| **`deserialize compressed unchecked`**   | `39.90 us` (‚úÖ **1.00x**)                                  | `136.89 us` (‚ùå *3.43x slower*)                            | `56.96 ns` (üöÄ **700.40x faster**)               | `100.85 ns` (üöÄ **395.62x faster**)              | `217.25 ns` (üöÄ **183.64x faster**)               | `1.36 us` (üöÄ **29.43x faster**)                    |
| **`deserialize uncompressed`**           | `286.09 us` (‚úÖ **1.00x**)                                 | `424.40 us` (‚ùå *1.48x slower*)                            | `57.15 ns` (üöÄ **5005.49x faster**)              | `100.76 ns` (üöÄ **2839.39x faster**)             | `217.19 ns` (üöÄ **1317.22x faster**)              | `1.36 us` (üöÄ **211.09x faster**)                   |
| **`deserialize uncompressed unchecked`** | `233.96 ns` (‚úÖ **1.00x**)                                 | `521.16 ns` (‚ùå *2.23x slower*)                            | `57.17 ns` (üöÄ **4.09x faster**)                 | `100.73 ns` (üöÄ **2.32x faster**)                | `217.41 ns` (‚úÖ **1.08x faster**)                 | `1.34 us` (‚ùå *5.73x slower*)                       |

### msm

|        | `for bls12_381_optimized::g1projectivebls12_381`          | `for bls12_381_optimized::g2projectivebls12_381`           |
|:-------|:----------------------------------------------------------|:---------------------------------------------------------- |
|        | `2.38 s` (‚úÖ **1.00x**)                                    | `7.26 s` (‚ùå *3.05x slower*)                                |

### squareroot

|                          | `for bls12_381_optimized::froptimized`          | `for bls12_381_optimized::fqoptimized`          | `for bls12_381_optimized::fq2optimized`           |
|:-------------------------|:------------------------------------------------|:------------------------------------------------|:------------------------------------------------- |
| **`square root for qr`** | `25.88 us` (‚úÖ **1.00x**)                        | `39.49 us` (‚ùå *1.53x slower*)                   | `135.31 us` (‚ùå *5.23x slower*)                    |
| **`legendre for qr`**    | `14.33 us` (‚úÖ **1.00x**)                        | `39.54 us` (‚ùå *2.76x slower*)                   | `39.59 us` (‚ùå *2.76x slower*)                     |

### bitwise

|                               | `operations for bls12_381_optimized::froptimized::bigint`          | `operations for bls12_381_optimized::fqoptimized::bigint`           |
|:------------------------------|:-------------------------------------------------------------------|:------------------------------------------------------------------- |
| **`number of bits`**          | `4.85 ns` (‚úÖ **1.00x**)                                            | `5.03 ns` (‚úÖ **1.04x slower**)                                      |
| **`from little-endian bits`** | `132.28 ns` (‚úÖ **1.00x**)                                          | `189.36 ns` (‚ùå *1.43x slower*)                                      |
| **`from big-endian bits`**    | `132.34 ns` (‚úÖ **1.00x**)                                          | `189.24 ns` (‚ùå *1.43x slower*)                                      |
| **`comparison`**              | `4.91 ns` (‚úÖ **1.00x**)                                            | `5.08 ns` (‚úÖ **1.03x slower**)                                      |
| **`equality`**                | `5.41 ns` (‚úÖ **1.00x**)                                            | `5.67 ns` (‚úÖ **1.05x slower**)                                      |
| **`is zero`**                 | `4.90 ns` (‚úÖ **1.00x**)                                            | `5.21 ns` (‚úÖ **1.06x slower**)                                      |

### conversions

|                   | `for bls12_381_optimized::froptimized`          | `for bls12_381_optimized::fqoptimized`           |
|:------------------|:------------------------------------------------|:------------------------------------------------ |
| **`from bigint`** | `41.08 ns` (‚úÖ **1.00x**)                        | `77.01 ns` (‚ùå *1.87x slower*)                    |
| **`into bigint`** | `26.45 ns` (‚úÖ **1.00x**)                        | `47.71 ns` (‚ùå *1.80x slower*)                    |

---
Made with [criterion-table](https://github.com/nu11ptr/criterion-table)

